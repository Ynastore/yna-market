<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#0b0f19"/>
  <title>Mini Game â€” YNA STORE</title>
  <meta name="description" content="Mini game ringan: Neon Tap (score + combo) â€” YNA STORE." />
  <link rel="stylesheet" href="assets/style.css"/>
</head>

<body class="app">
  <div id="loader" class="loader">
    <div class="loader__card">
      <div class="loader__logo">YNA</div>
      <div class="loader__text">
        <div class="loader__title">GAME</div>
        <div class="loader__sub">Loadingâ€¦</div>
      </div>
      <div class="loader__bar"><span></span></div>
    </div>
  </div>

  <canvas id="snow" class="snow"></canvas>

  <header class="topbar">
    <a class="brand" href="index.html">
      <span class="brand__dot"></span>
      <span class="brand__name">YNA STORE</span>
      <span class="brand__tag">Mini Game</span>
    </a>

    <nav class="nav" id="nav">
      <a href="index.html">Home</a>
      <a href="produk.html">Produk</a>
      <a href="order-panel.html">Order Panel</a>
      <a href="order-script.html">Order Script</a>
      <a href="order-sewa.html">Sewa Bot</a>
      <a href="chat.html">Chat Yna AI</a>
      <a href="kontak.html" class="nav__cta">Kontak</a>
    </nav>

    <button class="hamburger" id="hamburger" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
  </header>

  <main class="container">
    <section class="section" style="margin-top:0;">
      <div class="section__head">
        <div>
          <h2 class="h2">Neon Tap</h2>
          <p class="muted">Tap target sebelum hilang. Makin cepat, makin tinggi combo.</p>
        </div>
        <a class="btn btn--small btn--ghost" href="produk.html">Balik ke Produk</a>
      </div>

      <div class="grid" style="display:grid; gap:14px; grid-template-columns: 1fr;">
        <div class="card card--glass">
          <div class="card__head">
            <div class="card__title">Arena</div>
            <div class="badge badge--soft" id="modeBadge">READY</div>
          </div>

          <div class="quick" style="margin-bottom:12px;">
            <div class="quick__item">
              <div class="quick__k">Score</div>
              <div class="quick__v" id="score">0</div>
            </div>
            <div class="quick__item">
              <div class="quick__k">Combo</div>
              <div class="quick__v" id="combo">x1</div>
            </div>
            <div class="quick__item">
              <div class="quick__k">Time</div>
              <div class="quick__v" id="time">30s</div>
            </div>
            <div class="quick__item">
              <div class="quick__k">Best</div>
              <div class="quick__v" id="best">0</div>
            </div>
          </div>

          <div id="arena" class="game-arena" aria-label="Game arena">
            <button id="target" class="game-target" aria-label="Target"></button>
            <div class="game-hint">
              <div class="h3" style="margin:0;">Tap untuk mulai</div>
              <div class="muted" style="margin-top:6px;">(di HP tinggal tap layar)</div>
            </div>
          </div>

          <div class="hero__actions" style="margin-top:12px;">
            <button id="btnStart" class="btn btn--primary" type="button">
              Start
              <span class="btn__glow"></span>
            </button>
            <button id="btnReset" class="btn btn--ghost" type="button">Reset</button>
            <a class="btn btn--ghost" href="https://wa.me/6283173403262" target="_blank" rel="noopener">Order ke Admin</a>
          </div>

          <div class="muted" style="margin-top:10px; font-size:12px; line-height:1.6;">
            Tip: kalau score kamu tinggi, screenshot lalu post dan tag YNA STORE ðŸ˜„
          </div>
        </div>
      </div>

      <footer class="footer">
        <div class="footer__bottom">
          <span>Â© <span id="year"></span> YNA STORE</span>
          <span class="muted">Mini Game</span>
        </div>
      </footer>
    </section>
  </main>

  <audio id="clickSound" preload="auto">
    <source src="assets/click.mp3" type="audio/mpeg">
  </audio>

  <script src="assets/app.js"></script>
  <script>
    // ====== Neon Tap (100% jalan, ringan) ======
    const arena = document.getElementById("arena");
    const target = document.getElementById("target");
    const hint = arena.querySelector(".game-hint");

    const scoreEl = document.getElementById("score");
    const comboEl = document.getElementById("combo");
    const timeEl = document.getElementById("time");
    const bestEl = document.getElementById("best");
    const modeBadge = document.getElementById("modeBadge");

    const btnStart = document.getElementById("btnStart");
    const btnReset = document.getElementById("btnReset");

    const S = {
      running:false,
      score:0,
      combo:1,
      time:30,
      timer:null,
      missTimeout:null,
      best: Number(localStorage.getItem("yna_best_score") || 0),
    };
    bestEl.textContent = S.best;

    function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }

    function randPos() {
      const r = arena.getBoundingClientRect();
      const pad = 18;
      const size = 64;
      const x = Math.random() * (r.width - size - pad*2) + pad;
      const y = Math.random() * (r.height - size - pad*2) + pad;
      return {x,y};
    }

    function setTargetPos() {
      const {x,y} = randPos();
      target.style.left = x + "px";
      target.style.top = y + "px";
      target.style.transform = "scale(1)";
      target.style.opacity = "1";

      // waktu muncul makin cepat kalau combo naik
      const ttl = clamp(900 - (S.combo-1)*60, 300, 900);

      clearTimeout(S.missTimeout);
      S.missTimeout = setTimeout(() => {
        // miss
        S.combo = 1;
        comboEl.textContent = "x" + S.combo;
        target.style.transform = "scale(.85)";
        target.style.opacity = ".55";
        // pindah lagi
        if (S.running) setTimeout(setTargetPos, 80);
      }, ttl);
    }

    function updateUI(){
      scoreEl.textContent = S.score;
      comboEl.textContent = "x" + S.combo;
      timeEl.textContent = S.time + "s";
    }

    function start(){
      if (S.running) return;
      S.running = true;
      S.score = 0;
      S.combo = 1;
      S.time = 30;
      hint.style.display = "none";
      modeBadge.textContent = "PLAY";
      updateUI();
      setTargetPos();

      clearInterval(S.timer);
      S.timer = setInterval(() => {
        S.time -= 1;
        timeEl.textContent = S.time + "s";
        if (S.time <= 0) end();
      }, 1000);
    }

    function end(){
      S.running = false;
      modeBadge.textContent = "END";
      clearInterval(S.timer);
      clearTimeout(S.missTimeout);

      // best
      if (S.score > S.best) {
        S.best = S.score;
        localStorage.setItem("yna_best_score", String(S.best));
        bestEl.textContent = S.best;
      }

      hint.style.display = "block";
      hint.innerHTML = `
        <div class="h3" style="margin:0;">Game selesai</div>
        <div class="muted" style="margin-top:6px;">Score kamu: <b>${S.score}</b> â€¢ Best: <b>${S.best}</b></div>
      `;
    }

    function reset(){
      S.running = false;
      clearInterval(S.timer);
      clearTimeout(S.missTimeout);
      S.score = 0;
      S.combo = 1;
      S.time = 30;
      modeBadge.textContent = "READY";
      updateUI();
      hint.style.display = "block";
      hint.innerHTML = `
        <div class="h3" style="margin:0;">Tap untuk mulai</div>
        <div class="muted" style="margin-top:6px;">(di HP tinggal tap layar)</div>
      `;
      target.style.left = "50%";
      target.style.top = "50%";
      target.style.transform = "translate(-50%,-50%) scale(.9)";
      target.style.opacity = ".6";
      // reset transform wrapper
      setTimeout(() => {
        target.style.transform = "scale(.9)";
      }, 50);
    }

    // click target
    target.addEventListener("click", () => {
      if (!S.running) return start();
      // hit
      S.score += 10 * S.combo;
      S.combo = clamp(S.combo + 1, 1, 12);
      updateUI();

      // micro animation
      target.style.transform = "scale(1.15)";
      target.style.opacity = "1";
      setTimeout(() => {
        if (S.running) setTargetPos();
      }, 60);
    });

    // tap arena to start
    arena.addEventListener("click", (e) => {
      if (!S.running && e.target !== target) start();
    });

    btnStart.addEventListener("click", start);
    btnReset.addEventListener("click", reset);

    reset();
  </script>

  <style>
    /* khusus game (biar clean, tetap pakai theme) */
    .game-arena{
      position:relative;
      height: 52vh;
      min-height: 340px;
      max-height: 520px;
      border-radius: 22px;
      overflow:hidden;
      background: radial-gradient(1200px 500px at 20% 10%, rgba(120,120,255,.20), transparent 55%),
                  radial-gradient(900px 480px at 90% 80%, rgba(0,255,200,.12), transparent 60%),
                  rgba(255,255,255,.03);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
      backdrop-filter: blur(8px);
    }
    .game-target{
      position:absolute;
      width:64px;height:64px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.22);
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.26), rgba(255,255,255,.06));
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
      cursor:pointer;
      transition: transform .12s ease, opacity .12s ease;
      outline:none;
      -webkit-tap-highlight-color: transparent;
    }
    .game-hint{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      text-align:center;
      padding: 16px;
      pointer-events:none;
    }
    @media (max-width: 860px){
      .game-arena{ height: 50vh; min-height: 320px; }
    }
  </style>
</body>
</html>